<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.osgi.org/xmlns/blueprint/v1.0.0 http://www.osgi.org/xmlns/blueprint/v1.0.0">

	<service auto-export="interfaces">
		<bean class="org.ops4j.pax.web.extender.whiteboard.runtime.DefaultResourceMapping">
			<property name="alias" value="/static/js/org.soluvas.web.backbone"/>
			<property name="path" value="/js"/>
		</bean>
	</service>

	<service auto-export="interfaces">
		<bean class="org.soluvas.web.site.JavaScriptModuleImpl">
			<argument value="underscore"/>
			<argument value="org.soluvas.web.backbone/underscore-1.3.3"/>
			<argument value="org.soluvas.web.backbone/underscore-1.3.3.min"/>
		</bean>
	</service>
	<service auto-export="interfaces">
		<bean class="org.soluvas.web.site.JavaScriptShimImpl">
			<argument value="underscore"/>
			<argument>
				<set/>
			</argument>
			<argument value="_"/>
		</bean>
	</service>
	<service auto-export="interfaces">
		<bean class="org.soluvas.web.site.JavaScriptModuleImpl">
			<argument value="backbone"/>
			<argument value="org.soluvas.web.backbone/backbone-0.9.2"/>
			<argument value="org.soluvas.web.backbone/backbone-0.9.2.min"/>
		</bean>
	</service>
	<service auto-export="interfaces">
		<bean class="org.soluvas.web.site.JavaScriptShimImpl">
			<argument value="backbone"/>
			<argument>
				<set>
					<value>underscore</value>
					<value>jquery</value>
				</set>
			</argument>
			<argument value="Backbone"/>
		</bean>
	</service>
	
	<service auto-export="interfaces">
		<bean class="org.soluvas.web.site.JavaScriptModuleImpl">
			<argument value="handlebars"/>
			<argument value="org.soluvas.web.backbone/handlebars-1.0.rc.1"/>
		</bean>
	</service>
	<service auto-export="interfaces">
		<bean class="org.soluvas.web.site.JavaScriptShimImpl">
			<argument value="handlebars"/>
			<argument>
				<set />
			</argument>
			<argument value="Handlebars" />
		</bean>
	</service>
	<service auto-export="interfaces">
		<bean class="org.soluvas.web.site.JavaScriptModuleImpl">
			<argument value="handlebars.runtime"/>
			<argument value="org.soluvas.web.backbone/handlebars-1.0.rc.1"/>
		</bean>
	</service>
	<service auto-export="interfaces">
		<bean class="org.soluvas.web.site.JavaScriptShimImpl">
			<argument value="handlebars.runtime"/>
			<argument>
				<set />
			</argument>
			<argument value="Handlebars" />
		</bean>
	</service>
	
	<!-- TODO: Mustache.js is deprecated, please use Handlebars precompilation -->
	<service auto-export="interfaces">
		<bean class="org.soluvas.web.site.JavaScriptModuleImpl">
			<argument value="mustache"/>
			<argument value="org.soluvas.web.backbone/mustache-0.5.2"/>
			<argument value="org.soluvas.web.backbone/mustache-0.5.2.min"/>
		</bean>
	</service>
	<service auto-export="interfaces">
		<bean class="org.soluvas.web.site.JavaScriptShimImpl">
			<argument value="mustache"/>
			<argument>
				<set/>
			</argument>
			<argument value="Mustache"/>
		</bean>
	</service>
	
	<service auto-export="interfaces">
		<bean class="org.soluvas.web.site.JavaScriptModuleImpl">
			<argument value="sugar"/>
			<argument value="org.soluvas.web.backbone/sugar-1.3.min"/>
			<argument value="org.soluvas.web.backbone/sugar-1.3.min"/>
		</bean>
	</service>
	<service auto-export="interfaces">
		<bean class="org.soluvas.web.site.JavaScriptShimImpl">
			<argument value="sugar"/>
			<argument>
				<set/>
			</argument>
			<argument value="Date"/>
		</bean>
	</service>
	<service auto-export="interfaces">
		<bean class="org.soluvas.web.site.JavaScriptModuleImpl">
			<argument value="sugar_id"/>
			<argument value="org.soluvas.web.backbone/sugar_id"/>
		</bean>
	</service>
	<service auto-export="interfaces">
		<bean class="org.soluvas.web.site.JavaScriptShimImpl">
			<argument value="sugar_id"/>
			<argument>
				<set>
					<value>sugar</value>
				</set>
			</argument>
			<argument value="Date"/>
		</bean>
	</service>
	<service auto-export="interfaces">
		<bean class="org.soluvas.web.site.JavaScriptModuleImpl">
			<argument value="livevalidation"/>
			<argument value="org.soluvas.web.backbone/livevalidation_amd-1.3"/>
		</bean>
	</service>

	<service auto-export="interfaces">
		<bean class="org.soluvas.web.site.JavaScriptModuleImpl">
			<argument value="pref.locale"/>
			<argument value="org.soluvas.web.backbone/pref.locale"/>
		</bean>
	</service>

	<service auto-export="interfaces">
		<bean class="org.soluvas.web.site.JavaScriptModuleImpl">
			<argument value="uritemplate"/>
			<argument value="org.soluvas.web.backbone/uritemplate"/>
		</bean>
	</service>
	<service auto-export="interfaces">
		<bean class="org.soluvas.web.site.JavaScriptShimImpl">
			<argument value="uritemplate"/>
			<argument>
				<set />
			</argument>
			<argument value="UriTemplate"/>
		</bean>
	</service>

</blueprint>
